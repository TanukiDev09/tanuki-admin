// ============================================
// MIXINS SASS - TANUKI ADMIN DASHBOARD
// ============================================

// ⚠️ IMPORTANTE: Para evitar loops de importación
// - Este archivo solo importa _variables.scss
// - NO importar otros archivos de componentes aquí
// - Si un mixin necesita variables, úsalas directamente
// - Los componentes deben importar este archivo, no al revés
// ============================================

@use './variables' as *;

// --- RESPONSIVE BREAKPOINTS (MOBILE-FIRST) ---
// Usar min-width para mobile-first approach
// Los estilos base son para móvil, luego se amplían para pantallas más grandes

@mixin respond-to($breakpoint) {
  @if $breakpoint == 'sm' {
    @media (min-width: $breakpoint-sm) {
      @content;
    }
  } @else if $breakpoint == 'md' {
    @media (min-width: $breakpoint-md) {
      @content;
    }
  } @else if $breakpoint == 'lg' {
    @media (min-width: $breakpoint-lg) {
      @content;
    }
  } @else if $breakpoint == 'xl' {
    @media (min-width: $breakpoint-xl) {
      @content;
    }
  } @else if $breakpoint == '2xl' {
    @media (min-width: $breakpoint-2xl) {
      @content;
    }
  }
}

@mixin sm {
  @include respond-to('sm') {
    @content;
  }
}

@mixin md {
  @include respond-to('md') {
    @content;
  }
}

@mixin lg {
  @include respond-to('lg') {
    @content;
  }
}

@mixin xl {
  @include respond-to('xl') {
    @content;
  }
}

@mixin xxl {
  @include respond-to('2xl') {
    @content;
  }
}

// Mixin para max-width (cuando realmente se necesite)
@mixin respond-to-max($breakpoint) {
  @if $breakpoint == 'sm' {
    @media (max-width: #{$breakpoint-sm - 1}) {
      @content;
    }
  } @else if $breakpoint == 'md' {
    @media (max-width: #{$breakpoint-md - 1}) {
      @content;
    }
  } @else if $breakpoint == 'lg' {
    @media (max-width: #{$breakpoint-lg - 1}) {
      @content;
    }
  } @else if $breakpoint == 'xl' {
    @media (max-width: #{$breakpoint-xl - 1}) {
      @content;
    }
  } @else if $breakpoint == '2xl' {
    @media (max-width: #{$breakpoint-2xl - 1}) {
      @content;
    }
  }
}

// --- FLEXBOX UTILITIES ---

@mixin flex-center {
  display: flex;
  justify-content: center;
  align-items: center;
}

@mixin flex-between {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

@mixin flex-column {
  display: flex;
  flex-direction: column;
}

@mixin container-base {
  width: 100%;
  max-width: 1200px;
  margin: 0 auto;
}

// --- CARD STYLES ---

@mixin card-base {
  padding: $card-padding;
  background: $card;
  border-radius: $card-radius;
  transition: box-shadow $transition-base;
  box-shadow: $card-shadow;

  &:hover {
    box-shadow: $card-hover-shadow;
  }
}

@mixin stat-card-base {
  gap: $spacing-xs;
  padding: $stat-card-padding;
  border-radius: $stat-card-radius;
  box-shadow: $card-shadow;

  @include flex-column;
}

// --- TEXT TRUNCATE ---

@mixin text-truncate {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

@mixin text-truncate-lines($lines) {
  display: -webkit-box;
  -webkit-line-clamp: $lines;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

// --- BUTTON RESET ---

@mixin button-reset {
  margin: 0;
  padding: 0;
  background: none;
  border: none;
  cursor: pointer;
  font: inherit;
  outline: none;
}

// --- ICON CIRCLE ---

@mixin icon-circle($size: $icon-lg, $bg: $muted, $color: $muted-foreground) {
  width: $size;
  height: $size;
  background: $bg;
  color: $color;
  border-radius: $radius-full;
  flex-shrink: 0;

  @include flex-center;
}

// --- BADGE STYLES ---

@mixin badge-base($bg, $color) {
  display: inline-flex;
  align-items: center;
  gap: $spacing-xs;
  padding: $spacing-xs $spacing-sm;
  background: $bg;
  color: $color;
  font-size: $font-size-xs;
  font-weight: $font-weight-semibold;
  border-radius: $radius-full;
}

// --- SCROLLBAR STYLES ---

@mixin custom-scrollbar {
  &::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  &::-webkit-scrollbar-track {
    background: transparent;
  }

  &::-webkit-scrollbar-thumb {
    background: rgba($muted-foreground, 0.3);
    border-radius: 4px;

    &:hover {
      background: rgba($muted-foreground, 0.5);
    }
  }
}

// --- FOCUS STYLES ---

@mixin focus-ring {
  outline: 2px solid $ring;
  outline-offset: 2px;
}

// --- TRANSITION ---

@mixin transition($properties...) {
  transition-property: #{$properties};
  transition-duration: $transition-base;
  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
}

// --- GLASSMORPHISM ---

@mixin glass-effect($opacity: 0.7, $blur: 10px) {
  background: rgba($card, $opacity);
  border: 1px solid rgba($card-foreground, 0.1);
  backdrop-filter: blur($blur);
  box-shadow: 0 4px 30px rgb(0 0 0 / 10%);
}

// --- ANIMATIONS ---

@mixin animate-pulse {
  animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}

@keyframes pulse {
  0%,
  100% {
    opacity: 1;
  }

  50% {
    opacity: 0.5;
  }
}
